<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/the_game.css') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <title>Poker</title>
</head>
<body>
    <header class="d-flex flex-wrap align-items-center justify-content-center justify-content-md-between py-3 mb-4 border-bottom">
      <a href="/" class="d-flex align-items-center col-md-3 mb-2 mb-md-0 text-dark text-decoration-none">
          <svg class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap"><use xlink:href="#bootstrap"></use></svg>
      </a>

      <ul class="nav col-12 col-md-auto mb-2 justify-content-center mb-md-0">
          <li><a href="/" class="nav-link px-2 link-dark">Home</a></li>
          <li><a href="/about" class="nav-link px-2 link-dark">Info</a></li>
      </ul>
      <div class="col-md-3 text-end"></div>
    </header>
    <div></div>

    <div id="main">
        <div class="players">
                <div class="player player-1" id="player1" >
                <div class="avatar" style="background: blue;">{{ game.players.split()[0] }}</div>
            </div>
                <div class="player player-2"  id="player2">
            <div class="avatar" style="background: red;"><p>{{ game.players.split()[1] }}</p></div>
        </div>
            {% if game.number_of_players > 2 %}
                <div class="player player-3"  id="player3">
            <div class="avatar" style="background: cyan;">{{ game.players.split()[2] }}</div>
        </div>
            {% endif %}
            {% if game.number_of_players > 3 %}
                <div class="player player-4"  id="player4">
            <div class="avatar" style="background: gold;">{{ game.players.split()[3] }}</div>
        </div>
            {% endif %}
            {% if game.number_of_players > 4 %}
                <div class="player player-5"  id="player5">
            <div class="avatar" style="background: black;">{{ game.players.split()[4] }}</div>
        </div>
            {% endif %}
            {% if game.number_of_players > 5 %}
                <div class="player player-6"  id="player6">
            <div class="avatar" style="background: brown;">{{ game.players.split()[5] }}</div>

        </div>
            {% endif %}

    </div>
        <div class="cards">
            <div class="cards_player-1" id="player1_cards" >
            <div class="ava_cards" style="background: blue;">
                <div class="block_cards">
                    <img src="/static/img/cards/{{players_db[0].cards.split(',')[0]}}.png"
                        width="100" height="150" alt="card1">
                    <img src="/static/img/cards/{{players_db[0].cards.split(',')[1]}}.png"
                        width="100" height="150" alt="card2">
                </div>
                <div class="chips">chips: {{ players_db[0].chips }}</div>
            </div>
        </div>
            <div class="cards_player-2"  id="player2_cards">
            <div class="ava_cards" style="background: red;">
                <div class="block_cards">
                    <img src="/static/img/cards/{{players_db[1].cards.split(',')[0]}}.png"
                        width="100" height="150" alt="card1">
                    <img src="/static/img/cards/{{players_db[1].cards.split(',')[1]}}.png"
                        width="100" height="150" alt="card2">
                </div>
                <div class="chips">chips: {{ players_db[1].chips }}</div>
            </div>
        </div>
            {% if game.number_of_players > 2 %}
                <div class="cards_player-3"  id="player3_cards">
            <div class="ava_cards" style="background: cyan;">
                <div class="block_cards">
                    <img src="/static/img/cards/{{players_db[2].cards.split(',')[0]}}.png"
                        width="100" height="150" alt="card1">
                    <img src="/static/img/cards/{{players_db[2].cards.split(',')[1]}}.png"
                        width="100" height="150" alt="card2">
                </div>
                <div class="chips">chips: {{ players_db[2].chips }}</div>
            </div>
        </div>
            {% endif %}
            {% if game.number_of_players > 3 %}
                <div class="cards_player-4"  id="player4_cards">
            <div class="ava_cards" style="background: gold;">
                <div class="block_cards">
                    <img src="/static/img/cards/{{players_db[3].cards.split(',')[0]}}.png"
                        width="100" height="150" alt="card1">
                    <img src="/static/img/cards/{{players_db[3].cards.split(',')[1]}}.png"
                        width="100" height="150" alt="card2">
                </div>
                <div class="chips">chips: {{ players_db[3].chips }}</div>
            </div>
        </div>
            {% endif %}
            {% if game.number_of_players > 4 %}
                <div class="cards_player-5"  id="player5_cards">
            <div class="ava_cards" style="background: black;">
                <div class="block_cards">
                    <img src="/static/img/cards/{{players_db[4].cards.split(',')[0]}}.png"
                        width="100" height="150" alt="card1">
                    <img src="/static/img/cards/{{players_db[4].cards.split(',')[1]}}.png"
                        width="100" height="150" alt="card2">
                </div>
                <div class="chips">chips: {{ players_db[4].chips }}</div>
            </div>
        </div>
            {% endif %}
            {% if game.number_of_players > 5 %}
                <div class="cards_player-6"  id="player6_cards)">
            <div class="ava_cards" style="background: brown;">
                <div class="block_cards">
                    <img src="/static/img/cards/{{players_db[5].cards.split(',')[0]}}.png"
                        width="100" height="150" alt="card1">
                    <img src="/static/img/cards/{{players_db[5].cards.split(',')[1]}}.png"
                        width="100" height="150" alt="card2">
                </div>
                <div class="chips">chips: {{ players_db[5].chips }}</div>
            </div>
        </div>
            {% endif %}
    </div>
        <div class='square-box'>
            <div class='square-content'> <span></span></div>
        </div>
        <div class="table_block">
            <div class="cards_on_table">
                {% if game.cards_show_status > 0%}
                    <img class="123cards"
                     src="/static/img/cards/{{game.cards_on_table.split(',')[0]}}.png"
                        width="100" height="150" alt="card1">
                    <img class="123cards"
                     src="/static/img/cards/{{game.cards_on_table.split(',')[1]}}.png"
                        width="100" height="150" alt="card2">
                    <img class="123cards"
                     src="/static/img/cards/{{game.cards_on_table.split(',')[2]}}.png"
                        width="100" height="150" alt="card3">
                {% endif %}
                {% if game.cards_show_status > 1 %}
                    <img class="4cards"
                     src="/static/img/cards/{{game.cards_on_table.split(',')[3]}}.png"
                        width="100" height="150" alt="card4">
                {% endif %}
                {% if game.cards_show_status > 2 %}
                    <img class="5cards"
                     src="/static/img/cards/{{game.cards_on_table.split(',')[4]}}.png"
                        width="100" height="150" alt="card5">
                {% endif %}
            </div>
            <div class="bank">
                bank: {{ game.pot }}
            </div>
        </div>

        {% if game.bet_ask %}
            <div class="bet_ask_block">
            <form method="POST">
                <div class="form-floating">
                    <input type="number" name="bet" id="bet" class="form-control"><br>
                    <label>Ставка</label>
                </div>
                <input type="submit" class="w-100 btn btn-lg btn-primary" value="Сделать ставку">
            </form>
            </div>
        {% endif %}
        {% if game.row != 0 and game.row < 4 and not game.bet_ask %}
            <div class="action_block">
            Ход {{ players_db[id_p_now].name }}:
            <form method="POST"> <!--possible responses-->
                {% if "fold" in players_db[id_p_now].possible_responses%}
                        <div class="form-control"><input class="form-check-input" type="radio" name="player_action" value="fold"> fold </div>
                {% endif %}
                {% if "all-in" in players_db[id_p_now].possible_responses%}
                        <div class="form-control"><input class="form-check-input" type="radio" name="player_action" value="all-in"> all-in </div>
                {% endif %}
                {% if "raise" in players_db[id_p_now].possible_responses%}
                        <div class="form-control"><input class="form-check-input" type="radio" name="player_action" value="raise"> raise </div>
                {% endif %}
                {% if "call" in players_db[id_p_now].possible_responses%}
                        <div class="form-control"><input class="form-check-input" type="radio" name="player_action" value="call"> call </div>
                {% endif %}
                {% if "check" in players_db[id_p_now].possible_responses%}
                        <div class="form-control"><input class="form-check-input" type="radio" name="player_action" value="check"> check </div>
                {% endif %}

                <input class="btn btn-primary" type="submit" value="Сделать ход">
            </form>
        </div>
        {% endif %}
        {% if game.row == 0 %}
            <div class="start_block">
                <form method="POST">
                    <input type="hidden" name="row" value="1">
                    <input name="start-button" id="start-button" type="submit" class="btn btn-primary btn-lg btn-block">
                </form>
            </div>
        {% endif %}

        {% if game.players.split().index(game.dealer) == 0 %}
            <div class="dealer_button_1">
                <img src="static/img/dealer_button.png" width="50px">
            </div>
        {% endif %}
        {% if game.players.split().index(game.dealer) == 1 %}
            <div class="dealer_button_2">
                <img src="static/img/dealer_button.png" width="50px">
            </div>
        {% endif %}
        {% if game.players.split().index(game.dealer) == 2 %}
            <div class="dealer_button_3">
                <img src="static/img/dealer_button.png" width="50px">
            </div>
        {% endif %}
        {% if game.players.split().index(game.dealer) == 3 %}
            <div class="dealer_button_4">
                <img src="static/img/dealer_button.png" width="50px">
            </div>
        {% endif %}
        {% if game.players.split().index(game.dealer) == 4 %}
            <div class="dealer_button_5">
                <img src="static/img/dealer_button.png" width="50px">
            </div>
        {% endif %}
        {% if game.players.split().index(game.dealer) == 5 %}
            <div class="dealer_button_6">
                <img src="static/img/dealer_button.png" width="50px">
            </div>
        {% endif %}


    </div>

    {% if game.round_ended %}
        <div class="block_win">
            <div>
                <img src="static/img/winner_background.jpg" width="30%">
            </div>
        </div>
        <div  class="win_text">
            <p>Выиграл {{ game.winners.split()[0] }} <br> + {{game.pot}}</p>
        </div>
        <div class="end_button_next">
            <form method="POST">
                <input type="hidden" name="row" value="6">
                <input name="end_button" type="submit" class="btn btn-light btn-lg btn-block" value="Продолжить">
            </form>
        </div>
        <div class="end_button_final">
            <form method="POST">
                <input type="hidden" name="row" value="7">
                <input name="end_button" type="submit" class="btn btn-light btn-lg btn-block" value="Завершить">
            </form>
        </div>
    {% endif %}

    <footer class="page-footer font-small mdb-color darken-3 pt-4">
    <div class="col-md-4 d-flex align-items-center">
      <a href="/" class="mb-3 me-2 mb-md-0 text-muted text-decoration-none lh-1">
        <svg class="bi" width="30" height="24"><use xlink:href="#bootstrap"></use></svg>
      </a>
      <span class="mb-3 mb-md-0 text-muted">© 2023 Deniska_Project</span>
    </div>
  </footer>

    <script src="static/scripts/game_scrypt.js"></script>
</body>
</html>